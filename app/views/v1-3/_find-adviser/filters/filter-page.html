{% extends "layout.html" %}

{% block pageTitle %}
  Find an adviser
{% endblock %}

{% block header %}
  <!-- Blank header with no service name for the start page -->
  {{ govukHeader() }}
{% endblock %}

{% block beforeContent %}
  {{ govukPhaseBanner({
    tag: {
      text: "prototype"
    },
    html: 'This is not a real service.'
  }) }}
{% endblock %}

{% block content %}

  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">

      <!-- RESULTS? ###################################### -->
      {% set numToDisplay = 20 %}
      {% set numResults = results | length %}
      {% if numResults < numToDisplay %}
        {% set numToDisplay = numResults %}
      {% endif %}

      <h1 class="govuk-heading-xl" style="width:12em;">Find an adviser</h1>

      <form class="form" action="{{formAction}}" method="get">


          <div class="govuk-grid-row">
            <div class="govuk-grid-column-one-third">
              {% include "./includes/filters.html" %}
            </div>
            <div class="govuk-grid-column-two-thirds">

            <!-- Check if filters have been applied -->
            {% set filterLength = data.category | length + data.country | length + data.registers | length + data.statuses | length %}

            {% include "./includes/filter-panel.html" %}

            {% set print = true %}
            {% for result in results | sort(attribute="name") %}

                {% if print %}
                    <h3 class="govuk-heading-m"><a  style="text-decoration:none;" href="adviser-details/{{ result.adviserID }}">{{ result.name }}</a></h3>
                    <p class="govuk-heading-s">{{ result.adviserName }}</p>
                    <p class="govuk-body-s"><b>Location:</b> {{ result.counties }}</p> 
                    <p class="govuk-body-s"><b>Experience:</b> {{ result.experience }}</p> 
                    <p class="govuk-body-s"><b>Sectors:</b> {{ result.sectors }}</p>
                    <p class="govuk-body-s"><b>Skills:</b> {{ result.skills }}</p>
                    <p style="margin: 30px 0 0 0; border-top: 1px solid #cccccc;">&nbsp;</p>
                {% endif %}

                {% if loop.index==numToDisplay %}
                  {% set print = false %}
                {% endif %}

            {% endfor %}



      {% include "../../../includes/pagination_counter.html" %}

    </div><!-- end col 2/3rds for results -->
  </div><!-- end grid row -->

</form>

    </div>
  </div>



{% endblock %}
